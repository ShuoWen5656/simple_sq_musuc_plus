import{n as se,q as ae,s as Z,t as re,v as U,x as le,y as ee,z as ie,A as de,r as m,B as te,C as B,D as oe,E as ce,G as ue,H as fe,I as ve,J as _e,K as me,L as M,M as pe,V as ge,N as he,O as be,P as we,_ as ye,a as xe,Q as V,d as L,e as d,w as l,f as ke,g as r,i as $,F as W,R as q,S as D,T as ze,l as Se,o as z,j as G,k as C,c as K,p as Oe,m as Ce}from"./index-5d122f12.js";import{s as Re,a as Ee,m as Le,b as Pe,A as $e,c as je}from"./api-4fbdfc0f.js";import{T as Fe}from"./TopWitge-98bd8406.js";import{t as Te,_ as Ae}from"./Select-4326df20.js";import{_ as Ie,a as Be,b as Me}from"./Thing-f3b66983.js";import{_ as Ne}from"./Tooltip-8d7dc34e.js";import{_ as He}from"./Form-759cc2ac.js";import{_ as Ve}from"./Input-63bb4f58.js";import"./use-merged-state-8e2edd4b.js";import"./get-24aa7462.js";import"./context-842c777b.js";const We=se&&"loading"in document.createElement("img");function De(e={}){var i;const{root:c=null}=e;return{hash:`${e.rootMargin||"0px 0px 0px 0px"}-${Array.isArray(e.threshold)?e.threshold.join(","):(i=e.threshold)!==null&&i!==void 0?i:"0"}`,options:Object.assign(Object.assign({},e),{root:(typeof c=="string"?document.querySelector(c):c)||document.documentElement})}}const J=new WeakMap,Q=new WeakMap,X=new WeakMap,Ke=(e,i,c)=>{if(!e)return()=>{};const u=De(i),{root:h}=u.options;let s;const v=J.get(h);v?s=v:(s=new Map,J.set(h,s));let b,f;s.has(u.hash)?(f=s.get(u.hash),f[1].has(e)||(b=f[0],f[1].add(e),b.observe(e))):(b=new IntersectionObserver(S=>{S.forEach(_=>{if(_.isIntersecting){const k=Q.get(_.target),R=X.get(_.target);k&&k(),R&&(R.value=!0)}})},u.options),b.observe(e),f=[b,new Set([e])],s.set(u.hash,f));let g=!1;const x=()=>{g||(Q.delete(e),X.delete(e),g=!0,f[1].has(e)&&(f[0].unobserve(e),f[1].delete(e)),f[1].size<=0&&s.delete(u.hash),s.size||J.delete(h))};return Q.set(e,x),X.set(e,c),x},Ue=ae("n-avatar-group"),qe=Z("avatar",`
 width: var(--n-merged-size);
 height: var(--n-merged-size);
 color: #FFF;
 font-size: var(--n-font-size);
 display: inline-flex;
 position: relative;
 overflow: hidden;
 text-align: center;
 border: var(--n-border);
 border-radius: var(--n-border-radius);
 --n-merged-color: var(--n-color);
 background-color: var(--n-merged-color);
 transition:
 border-color .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
`,[re(U("&","--n-merged-color: var(--n-color-modal);")),le(U("&","--n-merged-color: var(--n-color-popover);")),U("img",`
 width: 100%;
 height: 100%;
 `),ee("text",`
 white-space: nowrap;
 display: inline-block;
 position: absolute;
 left: 50%;
 top: 50%;
 `),Z("icon",`
 vertical-align: bottom;
 font-size: calc(var(--n-merged-size) - 6px);
 `),ee("text","line-height: 1.25")]),Ge=Object.assign(Object.assign({},oe.props),{size:[String,Number],src:String,circle:{type:Boolean,default:void 0},objectFit:String,round:{type:Boolean,default:void 0},bordered:{type:Boolean,default:void 0},onError:Function,fallbackSrc:String,intersectionObserverOptions:Object,lazy:Boolean,onLoad:Function,renderPlaceholder:Function,renderFallback:Function,imgProps:Object,color:String}),Je=ie({name:"Avatar",props:Ge,setup(e){const{mergedClsPrefixRef:i,inlineThemeDisabled:c}=de(e),u=m(!1);let h=null;const s=m(null),v=m(null),b=()=>{const{value:t}=s;if(t&&(h===null||h!==t.innerHTML)){h=t.innerHTML;const{value:o}=v;if(o){const{offsetWidth:n,offsetHeight:p}=o,{offsetWidth:w,offsetHeight:y}=t,P=.9,E=Math.min(n/w*P,p/y*P,1);t.style.transform=`translateX(-50%) translateY(-50%) scale(${E})`}}},f=te(Ue,null),g=B(()=>{const{size:t}=e;if(t)return t;const{size:o}=f||{};return o||"medium"}),x=oe("Avatar","-avatar",qe,he,e,i),S=te(Te,null),_=B(()=>{if(f)return!0;const{round:t,circle:o}=e;return t!==void 0||o!==void 0?t||o:S?S.roundRef.value:!1}),k=B(()=>f?!0:e.bordered||!1),R=B(()=>{const t=g.value,o=_.value,n=k.value,{color:p}=e,{self:{borderRadius:w,fontSize:y,color:P,border:E,colorModal:F,colorPopover:T},common:{cubicBezierEaseInOut:A}}=x.value;let I;return typeof t=="number"?I=`${t}px`:I=x.value.self[be("height",t)],{"--n-font-size":y,"--n-border":n?E:"none","--n-border-radius":o?"50%":w,"--n-color":p||P,"--n-color-modal":p||F,"--n-color-popover":p||T,"--n-bezier":A,"--n-merged-size":`var(--n-avatar-size-override, ${I})`}}),O=c?ce("avatar",B(()=>{const t=g.value,o=_.value,n=k.value,{color:p}=e;let w="";return t&&(typeof t=="number"?w+=`a${t}`:w+=t[0]),o&&(w+="b"),n&&(w+="c"),p&&(w+=we(p)),w}),R,e):void 0,j=m(!e.lazy);ue(()=>{if(e.lazy&&e.intersectionObserverOptions){let t;const o=fe(()=>{t==null||t(),t=void 0,e.lazy&&(t=Ke(v.value,e.intersectionObserverOptions,j))});ve(()=>{o(),t==null||t()})}}),_e(()=>{var t;return e.src||((t=e.imgProps)===null||t===void 0?void 0:t.src)},()=>{u.value=!1});const N=m(!e.lazy);return{textRef:s,selfRef:v,mergedRoundRef:_,mergedClsPrefix:i,fitTextTransform:b,cssVars:c?void 0:R,themeClass:O==null?void 0:O.themeClass,onRender:O==null?void 0:O.onRender,hasLoadError:u,shouldStartLoading:j,loaded:N,mergedOnError:t=>{if(!j.value)return;u.value=!0;const{onError:o,imgProps:{onError:n}={}}=e;o==null||o(t),n==null||n(t)},mergedOnLoad:t=>{const{onLoad:o,imgProps:{onLoad:n}={}}=e;o==null||o(t),n==null||n(t),N.value=!0}}},render(){var e,i;const{$slots:c,src:u,mergedClsPrefix:h,lazy:s,onRender:v,loaded:b,hasLoadError:f,imgProps:g={}}=this;v==null||v();let x;const S=!b&&!f&&(this.renderPlaceholder?this.renderPlaceholder():(i=(e=this.$slots).placeholder)===null||i===void 0?void 0:i.call(e));return this.hasLoadError?x=this.renderFallback?this.renderFallback():me(c.fallback,()=>[M("img",{src:this.fallbackSrc,style:{objectFit:this.objectFit}})]):x=pe(c.default,_=>{if(_)return M(ge,{onResize:this.fitTextTransform},{default:()=>M("span",{ref:"textRef",class:`${h}-avatar__text`},_)});if(u||g.src){const k=this.src||g.src;return M("img",Object.assign(Object.assign({},g),{loading:We&&!this.intersectionObserverOptions&&s?"lazy":"eager",src:s&&this.intersectionObserverOptions?this.shouldStartLoading?k:void 0:k,"data-image-src":k,onLoad:this.mergedOnLoad,onError:this.mergedOnError,style:[g.style||"",{objectFit:this.objectFit},S?{height:"0",width:"0",visibility:"hidden",position:"absolute"}:""]}))}}),M("span",{ref:"selfRef",class:[`${h}-avatar`,this.themeClass],style:this.cssVars},x,s&&S)}});const ne=e=>(Oe("data-v-43597177"),e=e(),Ce(),e),Qe=ne(()=>$("br",null,null,-1)),Xe=ne(()=>$("br",null,null,-1)),Ye={id:"addlist"},Ze={key:0,id:"musicshowdiv"},et={key:1,id:"albumshowdiv"},tt={key:2,id:"artistshowdiv"},ot={class:"page"},nt={__name:"Search",setup(e){let i=m("kw"),c=m("music"),u=m(""),h=m(20),s=m(1),v=m([]),b=m(!1),f=()=>{let o=window.localStorage.getItem("setinfo"),n=m(JSON.parse(o));for(let p of n.value)if(p.configKey=="music.show.play"&&p.configValue=="true")return!0;return!1},g=m([{label:"某我",value:"kw"},{label:"鹅厂",value:"qq"},{label:"10086",value:"mg",disabled:!0}]),x=m([{label:"单曲",value:"music"},{label:"专辑",value:"album"},{label:"歌手（全部专辑）",value:"artist"},{label:"歌手（全部歌曲）-不分失效",value:"artistAllSong"}]),S=(o,n)=>{s.value=1,v.value=[]};xe(()=>{Re().then(o=>{console.log(o),V(()=>{g.value=o.data.data})}),b.value=f()});let _=()=>{Ee(i.value,c.value,u.value,h.value,s.value).then(o=>{o.data.code===200&&V(()=>{v.value=o.data.data.records})})},k=o=>{Le(o,i.value,2e3).then(n=>{n.data.code===200?window.$message.success("提交成功加入待下载"):window.$message.error("提交失败："+n.data.msg)})},R=o=>{Pe(o,i.value).then(n=>{n.data.code===200?window.open(n.data.data.url,"_blank"):window.$message.error("好像没获取到数据："+n.data.msg)})},O=o=>{$e(o,i.value,2e3).then(n=>{n.data.code===200?window.$message.success("提交成功加入待下载"):window.$message.error("提交失败："+n.data.msg)})},j=o=>{je(o,i.value,2e3).then(n=>{n.data.code===200?window.$message.success("提交成功加入待下载"):window.$message.error("提交失败："+n.data.msg)})},N=()=>{V(()=>{s.value=s.value+1,_()})},t=()=>{V(()=>{s.value=s.value-1,s.value<1&&(s.value=1,window.$message.error("第一页就别点了吧")),_()})};return(o,n)=>{const p=Ae,w=Ve,y=Se,P=He,E=Je,F=Ie,T=Be,A=Me,I=Ne;return z(),L(W,null,[d(Fe),d(P,{inline:"",onKeyup:ke(r(_),["enter","native"])},{default:l(()=>[d(p,{value:r(i),"onUpdate:value":[n[0]||(n[0]=a=>G(i)?i.value=a:i=a),r(S)],placeholder:"Select",options:r(g)},null,8,["value","options","onUpdate:value"]),d(p,{value:r(c),"onUpdate:value":[n[1]||(n[1]=a=>G(c)?c.value=a:c=a),r(S)],placeholder:"Select",options:r(x)},null,8,["value","options","onUpdate:value"]),d(w,{placeholder:"关键字",value:r(u),"onUpdate:value":n[2]||(n[2]=a=>G(u)?u.value=a:u=a)},null,8,["value"]),d(y,{"attr-type":"button",onClick:r(_)},{default:l(()=>[C(" 搜索 ")]),_:1},8,["onClick"])]),_:1},8,["onKeyup"]),Qe,Xe,$("div",Ye,[r(c)==="music"?(z(),L("div",Ze,[(z(!0),L(W,null,q(r(v),(a,Y)=>(z(),K(A,null,{default:l(()=>[d(T,null,{prefix:l(()=>[d(E,{size:48,src:a.pic},null,8,["src"])]),suffix:l(()=>[d(y,{onClick:H=>r(k)(a.id)},{default:l(()=>[C(" 下载")]),_:2},1032,["onClick"]),r(b)?(z(),K(y,{key:0,onClick:H=>r(R)(a.id)},{default:l(()=>[C(" 播放")]),_:2},1032,["onClick"])):D("",!0)]),default:l(()=>[d(F,{title:a.name,description:a.artistName},null,8,["title","description"])]),_:2},1024)]),_:2},1024))),256))])):D("",!0),r(c)==="album"?(z(),L("div",et,[(z(!0),L(W,null,q(r(v),(a,Y)=>(z(),K(A,null,{default:l(()=>[d(T,null,{prefix:l(()=>[d(E,{size:48,src:a.pic},null,8,["src"])]),suffix:l(()=>[d(y,{onClick:H=>r(j)(a.albumid)},{default:l(()=>[C(" 下载该专辑全部歌曲")]),_:2},1032,["onClick"])]),default:l(()=>[d(F,{title:a.albumName,description:a.artistName},null,8,["title","description"])]),_:2},1024)]),_:2},1024))),256))])):D("",!0),r(c)==="artist"||r(c)==="artistAllSong"?(z(),L("div",tt,[(z(!0),L(W,null,q(r(v),(a,Y)=>(z(),K(A,null,{default:l(()=>[d(T,null,{prefix:l(()=>[d(E,{size:48,src:a.pic},null,8,["src"])]),suffix:l(()=>[d(y,{onClick:H=>r(O)(a.artistid)},{default:l(()=>[C(" 下载全部专辑歌曲")]),_:2},1032,["onClick"]),d(I,{"show-arrow":!1,trigger:"hover"},{trigger:l(()=>[d(y,{onClick:H=>r(O)(a.artistid)},{default:l(()=>[C(" 下载全部歌曲")]),_:2},1032,["onClick"])]),default:l(()=>[C(" 部分歌曲不在专辑中此功能也可下载（部分不支持比如鹅厂） ")]),_:2},1024)]),default:l(()=>[d(F,{title:a.artistName,description:a.total+"张专辑"},null,8,["title","description"])]),_:2},1024)]),_:2},1024))),256))])):D("",!0),$("div",ot,[d(y,{onClick:r(t)},{default:l(()=>[C("上一页")]),_:1},8,["onClick"]),$("div",null,[$("h3",null,"   当前第： "+ze(r(s))+"页   ",1)]),d(y,{onClick:r(N)},{default:l(()=>[C("下一页")]),_:1},8,["onClick"])])])],64)}}},mt=ye(nt,[["__scopeId","data-v-43597177"]]);export{mt as default};

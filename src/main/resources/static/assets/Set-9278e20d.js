import{n as $e,g as Le}from"./api-4fbdfc0f.js";import{T as Ee}from"./TopWitge-98bd8406.js";import{z as we,L as h,c5 as He,az as je,c6 as ze,c7 as Ke,v as Ge,s as de,A as Je,D as ye,aF as We,r as g,ad as Qe,aH as k,J as Xe,aJ as Ye,C as qe,M as fe,ar as ce,c8 as Ze,K as me,a6 as pe,be as ve,ae as P,Q as en,d as L,e as m,w as v,g as c,j as E,F as ge,bk as nn,c9 as tn,o as R,i as y,T as ln,k as Q,R as un,c as he,S as X,l as on}from"./index-5d122f12.js";import{_ as an}from"./Switch-5f5ea721.js";import{u as rn,_ as Ve}from"./Input-63bb4f58.js";import{u as sn}from"./use-merged-state-8e2edd4b.js";import{A as dn}from"./Add-a6e880d6.js";import{_ as fn,a as cn,b as mn}from"./Thing-f3b66983.js";import{_ as pn}from"./FormItem-572a9fd7.js";import"./context-842c777b.js";import"./get-24aa7462.js";const vn=we({name:"Remove",render(){return h("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},h("line",{x1:"400",y1:"256",x2:"112",y2:"256",style:`
        fill: none;
        stroke: currentColor;
        stroke-linecap: round;
        stroke-linejoin: round;
        stroke-width: 32px;
      `}))}});function gn(n){const{textColorDisabled:a}=n;return{iconColorDisabled:a}}const hn=He({name:"InputNumber",common:je,peers:{Button:ze,Input:Ke},self:gn}),_n=hn;function bn(n){return n==null||typeof n=="string"&&n.trim()===""?null:Number(n)}function xn(n){return n.includes(".")&&(/^(-)?\d+.*(\.|0)$/.test(n)||/^\.\d+$/.test(n))}function ae(n){return n==null?!0:!Number.isNaN(n)}function _e(n,a){return typeof n!="number"?"":a===void 0?String(n):n.toFixed(a)}function ie(n){if(n===null)return null;if(typeof n=="number")return n;{const a=Number(n);return Number.isNaN(a)?null:a}}const wn=Ge([de("input-number-suffix",`
 display: inline-block;
 margin-right: 10px;
 `),de("input-number-prefix",`
 display: inline-block;
 margin-left: 10px;
 `)]),be=800,xe=100,yn=Object.assign(Object.assign({},ye.props),{autofocus:Boolean,loading:{type:Boolean,default:void 0},placeholder:String,defaultValue:{type:Number,default:null},value:Number,step:{type:[Number,String],default:1},min:[Number,String],max:[Number,String],size:String,disabled:{type:Boolean,default:void 0},validator:Function,bordered:{type:Boolean,default:void 0},showButton:{type:Boolean,default:!0},buttonPlacement:{type:String,default:"right"},inputProps:Object,readonly:Boolean,clearable:Boolean,keyboard:{type:Object,default:{}},updateValueOnInput:{type:Boolean,default:!0},round:{type:Boolean,default:void 0},parse:Function,format:Function,precision:Number,status:String,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onFocus:[Function,Array],onBlur:[Function,Array],onClear:[Function,Array],onChange:[Function,Array]}),Vn=we({name:"InputNumber",props:yn,setup(n){const{mergedBorderedRef:a,mergedClsPrefixRef:V,mergedRtlRef:C}=Je(n),r=ye("InputNumber","-input-number",wn,_n,n,V),{localeRef:f}=rn("InputNumber"),o=We(n),{mergedSizeRef:I,mergedDisabledRef:T,mergedStatusRef:M}=o,_=g(null),H=g(null),j=g(null),b=g(n.defaultValue),s=Qe(n,"value"),d=sn(s,b),p=g(""),O=e=>{const t=String(e).split(".")[1];return t?t.length:0},Y=e=>{const t=[n.min,n.max,n.step,e].map(l=>l===void 0?0:O(l));return Math.max(...t)},q=k(()=>{const{placeholder:e}=n;return e!==void 0?e:f.value.placeholder}),D=k(()=>{const e=ie(n.step);return e!==null?e===0?1:Math.abs(e):1}),z=k(()=>{const e=ie(n.min);return e!==null?e:null}),K=k(()=>{const e=ie(n.max);return e!==null?e:null}),N=()=>{const{value:e}=d;if(ae(e)){const{format:t,precision:l}=n;t?p.value=t(e):e===null||l===void 0||O(e)>l?p.value=_e(e,void 0):p.value=_e(e,l)}else p.value=String(e)};N();const S=e=>{const{value:t}=d;if(e===t){N();return}const{"onUpdate:value":l,onUpdateValue:i,onChange:x}=n,{nTriggerFormInput:w,nTriggerFormChange:F}=o;x&&P(x,e),i&&P(i,e),l&&P(l,e),b.value=e,w(),F()},u=({offset:e,doUpdateIfValid:t,fixPrecision:l,isInputing:i})=>{const{value:x}=p;if(i&&xn(x))return!1;const w=(n.parse||bn)(x);if(w===null)return t&&S(null),null;if(ae(w)){const F=O(w),{precision:$}=n;if($!==void 0&&$<F&&!l)return!1;let B=Number.parseFloat((w+e).toFixed($??Y(w)));if(ae(B)){const{value:ue}=K,{value:oe}=z;if(ue!==null&&B>ue){if(!t||i)return!1;B=ue}if(oe!==null&&B<oe){if(!t||i)return!1;B=oe}return n.validator&&!n.validator(B)?!1:(t&&S(B),B)}}return!1},re=k(()=>u({offset:0,doUpdateIfValid:!1,isInputing:!1,fixPrecision:!1})===!1),G=k(()=>{const{value:e}=d;if(n.validator&&e===null)return!1;const{value:t}=D;return u({offset:-t,doUpdateIfValid:!1,isInputing:!1,fixPrecision:!1})!==!1}),Z=k(()=>{const{value:e}=d;if(n.validator&&e===null)return!1;const{value:t}=D;return u({offset:+t,doUpdateIfValid:!1,isInputing:!1,fixPrecision:!1})!==!1});function Ie(e){const{onFocus:t}=n,{nTriggerFormFocus:l}=o;t&&P(t,e),l()}function Ne(e){var t,l;if(e.target===((t=_.value)===null||t===void 0?void 0:t.wrapperElRef))return;const i=u({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0});if(i!==!1){const F=(l=_.value)===null||l===void 0?void 0:l.inputElRef;F&&(F.value=String(i||"")),d.value===i&&N()}else N();const{onBlur:x}=n,{nTriggerFormBlur:w}=o;x&&P(x,e),w(),en(()=>{N()})}function Be(e){const{onClear:t}=n;t&&P(t,e)}function ee(){const{value:e}=Z;if(!e){le();return}const{value:t}=d;if(t===null)n.validator||S(se());else{const{value:l}=D;u({offset:l,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})}}function ne(){const{value:e}=G;if(!e){te();return}const{value:t}=d;if(t===null)n.validator||S(se());else{const{value:l}=D;u({offset:-l,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})}}const Se=Ie,ke=Ne;function se(){if(n.validator)return null;const{value:e}=z,{value:t}=K;return e!==null?Math.max(0,e):t!==null?Math.min(0,t):0}function Re(e){Be(e),S(null)}function Ce(e){var t,l,i;!((t=j.value)===null||t===void 0)&&t.$el.contains(e.target)&&e.preventDefault(),!((l=H.value)===null||l===void 0)&&l.$el.contains(e.target)&&e.preventDefault(),(i=_.value)===null||i===void 0||i.activate()}let A=null,U=null,J=null;function te(){J&&(window.clearTimeout(J),J=null),A&&(window.clearInterval(A),A=null)}let W=null;function le(){W&&(window.clearTimeout(W),W=null),U&&(window.clearInterval(U),U=null)}function Te(){te(),J=window.setTimeout(()=>{A=window.setInterval(()=>{ne()},xe)},be),ce("mouseup",document,te,{once:!0})}function Me(){le(),W=window.setTimeout(()=>{U=window.setInterval(()=>{ee()},xe)},be),ce("mouseup",document,le,{once:!0})}const De=()=>{U||ee()},Fe=()=>{A||ne()};function Pe(e){var t,l;if(e.key==="Enter"){if(e.target===((t=_.value)===null||t===void 0?void 0:t.wrapperElRef))return;u({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})!==!1&&((l=_.value)===null||l===void 0||l.deactivate())}else if(e.key==="ArrowUp"){if(!Z.value||n.keyboard.ArrowUp===!1)return;e.preventDefault(),u({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})!==!1&&ee()}else if(e.key==="ArrowDown"){if(!G.value||n.keyboard.ArrowDown===!1)return;e.preventDefault(),u({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})!==!1&&ne()}}function Oe(e){p.value=e,n.updateValueOnInput&&!n.format&&!n.parse&&n.precision===void 0&&u({offset:0,doUpdateIfValid:!0,isInputing:!0,fixPrecision:!1})}Xe(d,()=>{N()});const Ae={focus:()=>{var e;return(e=_.value)===null||e===void 0?void 0:e.focus()},blur:()=>{var e;return(e=_.value)===null||e===void 0?void 0:e.blur()},select:()=>{var e;return(e=_.value)===null||e===void 0?void 0:e.select()}},Ue=Ye("InputNumber",C,V);return Object.assign(Object.assign({},Ae),{rtlEnabled:Ue,inputInstRef:_,minusButtonInstRef:H,addButtonInstRef:j,mergedClsPrefix:V,mergedBordered:a,uncontrolledValue:b,mergedValue:d,mergedPlaceholder:q,displayedValueInvalid:re,mergedSize:I,mergedDisabled:T,displayedValue:p,addable:Z,minusable:G,mergedStatus:M,handleFocus:Se,handleBlur:ke,handleClear:Re,handleMouseDown:Ce,handleAddClick:De,handleMinusClick:Fe,handleAddMousedown:Me,handleMinusMousedown:Te,handleKeyDown:Pe,handleUpdateDisplayedValue:Oe,mergedTheme:r,inputThemeOverrides:{paddingSmall:"0 8px 0 10px",paddingMedium:"0 8px 0 12px",paddingLarge:"0 8px 0 14px"},buttonThemeOverrides:qe(()=>{const{self:{iconColorDisabled:e}}=r.value,[t,l,i,x]=Ze(e);return{textColorTextDisabled:`rgb(${t}, ${l}, ${i})`,opacityDisabled:`${x}`}})})},render(){const{mergedClsPrefix:n,$slots:a}=this,V=()=>h(ve,{text:!0,disabled:!this.minusable||this.mergedDisabled||this.readonly,focusable:!1,theme:this.mergedTheme.peers.Button,themeOverrides:this.mergedTheme.peerOverrides.Button,builtinThemeOverrides:this.buttonThemeOverrides,onClick:this.handleMinusClick,onMousedown:this.handleMinusMousedown,ref:"minusButtonInstRef"},{icon:()=>me(a["minus-icon"],()=>[h(pe,{clsPrefix:n},{default:()=>h(vn,null)})])}),C=()=>h(ve,{text:!0,disabled:!this.addable||this.mergedDisabled||this.readonly,focusable:!1,theme:this.mergedTheme.peers.Button,themeOverrides:this.mergedTheme.peerOverrides.Button,builtinThemeOverrides:this.buttonThemeOverrides,onClick:this.handleAddClick,onMousedown:this.handleAddMousedown,ref:"addButtonInstRef"},{icon:()=>me(a["add-icon"],()=>[h(pe,{clsPrefix:n},{default:()=>h(dn,null)})])});return h("div",{class:[`${n}-input-number`,this.rtlEnabled&&`${n}-input-number--rtl`]},h(Ve,{ref:"inputInstRef",autofocus:this.autofocus,status:this.mergedStatus,bordered:this.mergedBordered,loading:this.loading,value:this.displayedValue,onUpdateValue:this.handleUpdateDisplayedValue,theme:this.mergedTheme.peers.Input,themeOverrides:this.mergedTheme.peerOverrides.Input,builtinThemeOverrides:this.inputThemeOverrides,size:this.mergedSize,placeholder:this.mergedPlaceholder,disabled:this.mergedDisabled,readonly:this.readonly,round:this.round,textDecoration:this.displayedValueInvalid?"line-through":void 0,onFocus:this.handleFocus,onBlur:this.handleBlur,onKeydown:this.handleKeyDown,onMousedown:this.handleMouseDown,onClear:this.handleClear,clearable:this.clearable,inputProps:this.inputProps,internalLoadingBeforeSuffix:!0},{prefix:()=>{var r;return this.showButton&&this.buttonPlacement==="both"?[V(),fe(a.prefix,f=>f?h("span",{class:`${n}-input-number-prefix`},f):null)]:(r=a.prefix)===null||r===void 0?void 0:r.call(a)},suffix:()=>{var r;return this.showButton?[fe(a.suffix,f=>f?h("span",{class:`${n}-input-number-suffix`},f):null),this.buttonPlacement==="right"?V():null,C()]:(r=a.suffix)===null||r===void 0?void 0:r.call(a)}}))}}),In=y("p",null," 插件url：↑↑↑↑↑↑↑↑↑↑↑↑（浏览器显示这个复制上 http://xxxxx:xxx 只要这一段即可 /#后边的不要）↑↑↑↑↑↑↑↑↑↑↑↑↑",-1),Nn=y("p",null," 插件使用token：",-1),Bn=y("br",null,null,-1),Sn=y("br",null,null,-1),kn=y("br",null,null,-1),Rn={key:0},Cn={key:1},Tn={key:2},Mn={style:{display:"flex","flex-direction":"row","justify-content":"flex-end"}},Dn=y("div",{style:{width:"30px"}},null,-1),Kn={__name:"Set",setup(n){let a=window.localStorage.getItem("setinfo"),V=window.localStorage.getItem("token")??"未获取到",C=g(JSON.parse(a)),r=g(!1),f=g(!1),o=g(""),I=g("input"),T=g(""),M=g(""),_=(b,s,d,p)=>{f.value=!0,I.value=b,b==="switch"?o=g(d==="true"):o.value=d,T.value=s,M.value=p},H=()=>{f.value=!1,o.value="",I.value="input",T.value="",M.value=""},j=()=>{f.value=!1,$e(M.value,o.value).then(b=>{b.data.code===200?(f.value=!1,o.value="",I.value="input",T.value="",M.value="",Le().then(s=>{window.localStorage.setItem("setinfo",JSON.stringify(s.data.data)),C.value=s.data.data})):window.$message.error("错误信息："+b.data.msg)})};return(b,s)=>{const d=on,p=nn,O=fn,Y=cn,q=mn,D=Ve,z=an,K=Vn,N=pn,S=tn;return R(),L(ge,null,[m(Ee),m(p,{title:"设置"},{default:v(()=>[m(p,{title:"Toekn和插件"},{default:v(()=>[In,Nn,y("p",null,ln(c(V)),1),m(d,{onClick:s[0]||(s[0]=u=>E(r)?r.value=!c(r):r=!c(r))},{default:v(()=>[Q("显示隐藏设置")]),_:1})]),_:1}),(R(!0),L(ge,null,un(c(C),(u,re)=>(R(),he(q,null,{default:v(()=>[c(r)||u.configShow=="Y"?(R(),he(Y,{key:0},{suffix:v(()=>[m(d,{onClick:G=>c(_)(u.type,u.configName,u.configValue,u.configKey)},{default:v(()=>[Q(" 修改")]),_:2},1032,["onClick"])]),default:v(()=>[m(O,{title:u.configName,description:u.configValue},null,8,["title","description"])]),_:2},1024)):X("",!0)]),_:2},1024))),256))]),_:1}),m(S,{show:c(f),"onUpdate:show":s[4]||(s[4]=u=>E(f)?f.value=u:f=u)},{default:v(()=>[m(p,{style:{width:"600px"},title:"设置(谨慎操作)",bordered:!1,size:"huge",role:"card","aria-modal":"true"},{action:v(()=>[y("div",Mn,[m(d,{onClick:c(j)},{default:v(()=>[Q("确定")]),_:1},8,["onClick"]),Dn,m(d,{onClick:c(H)},{default:v(()=>[Q("取消")]),_:1},8,["onClick"])])]),default:v(()=>[y("div",null,[m(N,{label:c(T)+":"},{default:v(()=>[Bn,Sn,kn,c(I)==="input"?(R(),L("div",Rn,[m(D,{value:c(o),"onUpdate:value":s[1]||(s[1]=u=>E(o)?o.value=u:o=u)},null,8,["value"])])):X("",!0),c(I)==="switch"?(R(),L("div",Cn,[m(z,{value:c(o),"onUpdate:value":s[2]||(s[2]=u=>E(o)?o.value=u:o=u)},null,8,["value"])])):X("",!0),c(I)==="number"?(R(),L("div",Tn,[m(K,{value:c(o),"onUpdate:value":s[3]||(s[3]=u=>E(o)?o.value=u:o=u),clearable:""},null,8,["value"])])):X("",!0)]),_:1},8,["label"])])]),_:1})]),_:1},8,["show"])],64)}}};export{Kn as default};
